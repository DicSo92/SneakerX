(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[13],{"1b34":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("q-page",{staticClass:"column items-center",attrs:{padding:""}},[a("q-card",{staticClass:"full-width"},[a("q-card-section",{staticClass:"bg-grey-10 text-white flex full-width"},[a("div",{staticClass:"text-h6"},[t._v("Logs / List")]),a("q-space")],1),a("q-separator"),a("q-card-section",[a("LogsList",{on:{selectedChange:t.changeSelect}})],1)],1)],1)},i=[],n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"full-width"},[a("q-table",{staticClass:"BrandTable",attrs:{title:"Treats",data:t.activityLogs,columns:t.columns,"visible-columns":t.visibleColumns,"row-key":"id",selection:"single",selected:t.selected,loading:t.loading},on:{"update:selected":function(e){t.selected=e}},scopedSlots:t._u([{key:"top",fn:function(){return[a("q-icon",{attrs:{name:"local_offer",size:"lg"}}),a("q-space"),a("q-input",{staticClass:"q-mr-md",attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:t.search,callback:function(e){t.search=e},expression:"search"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$q.lang.table.columns,"emit-value":"","map-options":"",options:t.columns,"option-value":"name","options-cover":""},model:{value:t.visibleColumns,callback:function(e){t.visibleColumns=e},expression:"visibleColumns"}})]},proxy:!0},{key:"header",fn:function(e){return[a("q-tr",{attrs:{props:e}},t._l(e.cols,(function(s){return a("q-th",{key:s.name,staticClass:"text-italic text-purple",attrs:{props:e}},[t._v("\n          "+t._s(s.label)+"\n        ")])})),1)]}},{key:"body",fn:function(e){return[a("q-tr",{staticClass:"cursor-pointer",attrs:{props:e},on:{click:function(t){e.expand=!e.expand}}},[a("q-td",{key:"id",attrs:{props:e,"auto-width":""}},[t._v("\n          "+t._s(e.row.id)+" #\n        ")]),a("q-td",{key:"log_name",attrs:{props:e,"auto-width":""}},[a("q-chip",{attrs:{color:t.colorByLogName(e.row.log_name),"text-color":"white",size:"md",square:"",label:e.row.log_name}})],1),a("q-td",{key:"description",attrs:{props:e}},[a("q-chip",{attrs:{color:t.colorByDescription(e.row.description),"text-color":"white",size:"md",label:e.row.description}})],1),a("q-td",{key:"subject_type",attrs:{props:e,"auto-width":""}},[a("div",[t._v(t._s(e.row.subject_type))])]),a("q-td",{key:"subject_id",attrs:{props:e,"auto-width":""}},[a("div",[t._v(t._s(e.row.subject_id))])]),a("q-td",{key:"created_at",staticClass:"text-caption text-grey-7",attrs:{props:e}},[t._v("\n          "+t._s(t.cFormatDate(e.row.created_at))+"\n        ")]),a("q-td",{key:"causer_id",attrs:{props:e,"auto-width":""}},[a("div",{staticClass:"text-pre-wrap text-bold"},[t._v(t._s(e.row.causer_id?"# "+e.row.causer_id:"Unknown"))])])],1),a("q-tr",{directives:[{name:"show",rawName:"v-show",value:e.expand,expression:"props.expand"}],attrs:{props:e}},[a("q-td",{attrs:{colspan:"100%"}},[e.row.properties.old?a("div",{staticClass:"row no-wrap"},[a("div",{staticClass:"col-6 column items-start"},[a("p",{staticClass:"text-bold no-margin"},[t._v("Old data : ")]),a("div",{staticClass:"flex justify-center items-center",staticStyle:{"flex-grow":"3"}},t._l(e.row.properties.old,(function(e,s){return a("div",{},[a("span",{staticClass:"text-bold"},[t._v(t._s(s)+" : ")]),t._v("\n                  "+t._s(e||"NULL")+"\n                ")])})),0)]),a("q-separator",{staticClass:"q-mx-md",attrs:{vertical:"",inset:""}}),a("div",{staticClass:"col-auto column items-start"},[a("p",{staticClass:"text-bold no-margin"},[t._v("New data : ")]),a("div",{staticClass:"flex justify-center items-center",staticStyle:{"flex-grow":"3"}},t._l(e.row.properties.attributes,(function(e,s){return a("div",{},[a("span",{staticClass:"text-bold"},[t._v(t._s(s)+" : ")]),t._v("\n                  "+t._s(e||"NULL")+"\n                ")])})),0)])],1):a("div",{staticClass:"flex q-gutter-md"},t._l(e.row.properties.attributes,(function(e,s){return a("div",{},[a("span",{staticClass:"text-bold"},[t._v(t._s(s)+" : ")]),t._v("\n              "+t._s(e||"NULL")+"\n            ")])})),0)])],1)]}},{key:"no-data",fn:function(e){var s=e.icon,i=e.message;e.filter;return[a("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[t._v("\n          Well this is sad... "+t._s(i)+"\n        ")]),a("q-icon",{attrs:{size:"2em",name:t.search?"filter_b_and_w":s}})],1)]}}])})],1)},o=[],r=a("d8ad"),c=(a("cf57"),a("bd4c")),l={name:"LogsList",data:function(){return{activityLogs:[],loading:!0,search:"",pagination:{sortBy:"id",descending:!1,rowsPerPage:15},selected:[],visibleColumns:["id","log_name","description","subject_id","subject_type","created_at","causer_id"],columns:[{name:"id",required:!0,label:"ID",field:function(t){return t.id},align:"left",sortable:!0},{name:"log_name",align:"left",label:"Log Name",field:"log_name",sortable:!0},{name:"description",align:"left",label:"Description",field:"description",sortable:!0},{name:"subject_type",align:"left",label:"Subject",field:"subject_type",sortable:!0},{name:"subject_id",align:"center",label:"# Subject",field:"subject_id"},{name:"created_at",label:"Created At",field:"created_at",sortable:!0},{name:"causer_id",required:!0,label:"# User",field:"causer_id",align:"right",sortable:!0}]}},created:function(){this.getActivityLogs()},mounted:function(){var t=this;r["a"].$on("refreshActivityLogs",(function(){t.getActivityLogs()}))},watch:{selected:function(t){this.$emit("selectedChange",t)}},methods:{colorByLogName:function(t){return"User"===t?"blue-5":"Brand"===t?"purple-4":"Order"===t?"amber-5":void 0},colorByDescription:function(t){return"created"===t?"green-5":"updated"===t?"orange-5":"deleted"===t?"red-5":void 0},cFormatDate:function(t){return c["a"].formatDate(t,"DD/MM/YY HH:mm")},getActivityLogs:function(){var t=this;this.loading=!0,this.$axios.get("/api/admin/activityLog").then((function(e){console.log(e),t.activityLogs=e.data,t.loading=!1})).catch((function(e){console.log(e),t.loading=!1}))}}},d=l,u=(a("4d20"),a("2877")),p=a("eebe"),m=a.n(p),f=a("eaac"),_=a("0016"),b=a("2c91"),g=a("27f9"),v=a("ddd8"),h=a("bd08"),w=a("357e"),y=a("db86"),q=a("b047"),x=a("eb85"),C=Object(u["a"])(d,n,o,!1,null,"1f48c345",null),L=C.exports;m()(C,"components",{QTable:f["a"],QIcon:_["a"],QSpace:b["a"],QInput:g["a"],QSelect:v["a"],QTr:h["a"],QTh:w["a"],QTd:y["a"],QChip:q["a"],QSeparator:x["a"]});var k={name:"ActivityLogs",components:{LogsList:L},data:function(){return{selected:[]}},created:function(){},mounted:function(){},computed:{},methods:{changeSelect:function(t){this.selected=t}}},j=k,Q=a("9989"),S=a("f09f"),D=a("a370"),N=Object(u["a"])(j,s,i,!1,null,"212ad0dd",null);e["default"]=N.exports;m()(N,"components",{QPage:Q["a"],QCard:S["a"],QCardSection:D["a"],QSpace:b["a"],QSeparator:x["a"]})},"4d20":function(t,e,a){"use strict";var s=a("a275"),i=a.n(s);i.a},a275:function(t,e,a){}}]);