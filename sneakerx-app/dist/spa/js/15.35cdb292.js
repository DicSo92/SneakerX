(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[15],{"37b3":function(e,t,a){"use strict";var s=a("faca"),n=a.n(s);n.a},"579c":function(e,t,a){"use strict";a.r(t);var s=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("q-page",{staticClass:"column items-center",attrs:{padding:""}},[a("q-card",{staticClass:"full-width"},[a("q-card-section",{staticClass:"bg-grey-10 text-white flex full-width"},[a("div",{staticClass:"text-h6"},[e._v("User / List")]),a("q-space"),a("div",{staticClass:"flex"},[a("q-btn",{staticClass:"q-mr-sm",attrs:{color:"purple-9",disable:"",icon:"add",label:"Add User"},on:{click:e.addUser}}),a("q-btn",{attrs:{color:"red-10",icon:"delete",label:"Delete Selection",disable:!e.selected.length},on:{click:e.deleteUsers}})],1)],1),a("q-separator"),a("q-card-section",[a("UsersList",{on:{selectedChange:e.changeSelect}})],1)],1)],1)},n=[],o=function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",{staticClass:"full-width",attrs:{id:"userList"}},[e.showTable?a("q-table",{staticClass:"TableUser",attrs:{title:"Treats",data:e.users,columns:e.columns,"row-key":"id",selection:"multiple",selected:e.selected,"visible-columns":e.visibleColumns,loading:e.loading,pagination:e.pagination},on:{"update:selected":function(t){e.selected=t},"update:pagination":function(t){e.pagination=t}},scopedSlots:e._u([{key:"top",fn:function(){return[a("q-icon",{attrs:{name:"group",size:"lg"}}),a("q-space"),a("q-input",{staticClass:"q-mr-md",attrs:{borderless:"",dense:"",debounce:"300",placeholder:"Search"},model:{value:e.search,callback:function(t){e.search=t},expression:"search"}},[a("q-icon",{attrs:{slot:"append",name:"search"},slot:"append"})],1),a("q-select",{staticStyle:{"min-width":"150px"},attrs:{multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":""},model:{value:e.visibleColumns,callback:function(t){e.visibleColumns=t},expression:"visibleColumns"}})]},proxy:!0},{key:"header",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-th",{attrs:{"auto-width":""}},[a("q-checkbox",{attrs:{color:"black"},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1),e._l(t.cols,(function(s){return a("q-th",{key:s.name,staticClass:"text-italic text-purple",attrs:{props:t,"auto-width":""}},[e._v("\n          "+e._s(s.label)+"\n        ")])}))],2)]}},{key:"body",fn:function(t){return[a("q-tr",{attrs:{props:t}},[a("q-td",{attrs:{"auto-width":""}},[a("q-checkbox",{attrs:{disable:t.row.id===e.getUserId,color:"black"},model:{value:t.selected,callback:function(a){e.$set(t,"selected",a)},expression:"props.selected"}})],1),a("q-td",{key:"id",attrs:{props:t,"auto-width":""}},[e._v("\n          "+e._s(t.row.id)+" #\n        ")]),a("q-td",{key:"name",staticClass:"text-bold",attrs:{props:t,"auto-width":""}},[e._v("\n          "+e._s(t.row.name)+"\n          "),a("q-popup-edit",{model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}},[a("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.name,callback:function(a){e.$set(t.row,"name",a)},expression:"props.row.name"}})],1)],1),a("q-td",{key:"email",attrs:{props:t,"auto-width":""}},[a("div",{staticClass:"text-pre-wrap"},[e._v(e._s(t.row.email))]),a("q-popup-edit",{model:{value:t.row.email,callback:function(a){e.$set(t.row,"email",a)},expression:"props.row.email"}},[a("q-input",{attrs:{dense:"",autofocus:"",counter:""},model:{value:t.row.email,callback:function(a){e.$set(t.row,"email",a)},expression:"props.row.email"}})],1)],1),a("q-td",{key:"role",attrs:{props:t,"auto-width":""}},[a("q-btn",{attrs:{size:"sm",outline:"",rounded:"",color:"SuperAdmin"===t.row.role.name?"red":"Admin"===t.row.role.name?"orange":"secondary",label:t.row.role.name}})],1),a("q-td",{key:"created_at",staticClass:"text-caption text-grey-7",attrs:{props:t,"auto-width":""}},[e._v(e._s(e.cFormatDate(t.row.created_at)))]),a("q-td",{key:"email_verified_at",staticClass:"text-caption text-grey-7",attrs:{props:t,"auto-width":""}},[e._v(e._s(e.cFormatDate(t.row.email_verified_at)))]),a("q-td",{key:"updated_at",staticClass:"text-caption text-grey-7",attrs:{props:t,"auto-width":""}},[e._v(e._s(e.cFormatDate(t.row.updated_at)))])],1)]}},{key:"no-data",fn:function(t){var s=t.icon,n=t.message;t.filter;return[a("div",{staticClass:"full-width row flex-center text-accent q-gutter-sm"},[a("q-icon",{attrs:{size:"2em",name:"sentiment_dissatisfied"}}),a("span",[e._v("\n          Well this is sad... "+e._s(n)+"\n        ")]),a("q-icon",{attrs:{size:"2em",name:e.search?"filter_b_and_w":s}})],1)]}}],null,!1,2775560833)}):e._e()],1)},i=[],r=(a("20d6"),a("cf57")),l=a("bd4c"),c={name:"UsersList",data:function(){return{showTable:!1,users:[],loading:!1,search:"",pagination:{sortBy:"id",descending:!1,rowsPerPage:10},selected:[],visibleColumns:["id","name","email","role","created_at","email_verified_at"],columns:[{name:"id",required:!0,label:"ID",field:function(e){return e.id},format:function(e){return"#".concat(e)},align:"left",sortable:!0},{name:"name",align:"left",label:"Name",field:"name",sortable:!0},{name:"email",label:"Email",field:"email",align:"left",sortable:!0},{name:"role",label:"Role",field:"role",align:"center",sortable:!0},{name:"created_at",label:"Created At",field:"created_at",sortable:!0},{name:"email_verified_at",label:"Verified At",field:"email_verified_at",sortable:!0},{name:"updated_at",label:"Updated At",field:"updated_at",sortable:!0}]}},created:function(){this.getUsers(),this.$root.$on("deleteUsers",this.deleteUsers),this.$root.$on("addUser",this.addUser)},mounted:function(){this.showTable=!0},watch:{selected:function(e){var t=this,a=this.selected.findIndex((function(e){return e.id===t.getUserId}));-1!==a&&this.selected.splice(a,1),this.$emit("selectedChange",e)}},computed:{getUserId:function(){return this.$store.state.auth.user.id}},methods:{cFormatDate:function(e){return l["a"].formatDate(e,"DD/MM/YY HH:mm")},getUsers:function(){var e=this;this.loading=!0,this.$axios.get("/api/admin/users").then((function(t){console.log(t),e.users=t.data,e.loading=!1})).catch((function(t){console.log("error"),console.log(t),e.loading=!1}))},addUser:function(){},deleteUsers:function(){var e=this,t=this.selected.length,a=0;this.$q.loading.show({message:"Deleting Users... (".concat(t,")")}),this.selected.forEach((function(s){e.$axios.delete("/api/admin/users/".concat(s.id)).then((function(n){console.log(n),a++,e.users.splice(e.users.findIndex((function(e){return e.id===s.id})),1),e.selected.splice(e.selected.findIndex((function(e){return e.id===s.id})),1),a===t&&e.hideLoading("User(s) Deleted")})).catch((function(t){console.log(t),e.hideLoading("An error occurred : "+t.message)}))}))},hideLoading:function(e){var t=this;this.$q.loading.show({spinner:r["a"],spinnerColor:"red",messageColor:"black",backgroundColor:"yellow",message:e}),this.timer=setTimeout((function(){t.$q.loading.hide(),t.timer=void 0}),2e3)}},beforeDestroy:function(){this.$q.loading.hide(),this.$root.$off("deleteUsers",this.deleteUsers),this.$root.$off("addUser",this.addUser)}},d=c,u=(a("37b3"),a("2877")),p=a("eebe"),m=a.n(p),f=a("eaac"),h=a("0016"),b=a("2c91"),g=a("27f9"),w=a("ddd8"),v=a("bd08"),_=a("357e"),q=a("8f8e"),x=a("db86"),k=a("42a1"),U=a("9c40"),C=Object(u["a"])(d,o,i,!1,null,"33935ae5",null),$=C.exports;m()(C,"components",{QTable:f["a"],QIcon:h["a"],QSpace:b["a"],QInput:g["a"],QSelect:w["a"],QTr:v["a"],QTh:_["a"],QCheckbox:q["a"],QTd:x["a"],QPopupEdit:k["a"],QBtn:U["a"]});var y={name:"Users",components:{UsersList:$},data:function(){return{selected:[]}},created:function(){},mounted:function(){},computed:{},methods:{changeSelect:function(e){this.selected=e},addUser:function(){this.$root.$emit("addUser")},deleteUsers:function(){this.$root.$emit("deleteUsers")}}},Q=y,D=a("9989"),S=a("f09f"),T=a("a370"),I=a("eb85"),L=Object(u["a"])(Q,s,n,!1,null,"55f5a852",null);t["default"]=L.exports;m()(L,"components",{QPage:D["a"],QCard:S["a"],QCardSection:T["a"],QSpace:b["a"],QBtn:U["a"],QSeparator:I["a"]})},faca:function(e,t,a){}}]);